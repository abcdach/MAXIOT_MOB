
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MAXIOT</title>
	<link rel="shortcut icon" href="favicon.ico">
	<link rel="stylesheet" href="css/themes/default/jquery.mobile-1.4.5.min.css">
	<script src="js/jquery.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
	<script src="js/GUI_ELEMENTS.js"></script>
	<link type="text/css" href="css/main.css" rel="stylesheet" /> 
	
	
	<script src="js/justgage/raphael-2.1.4.min.js"></script>
    <script src="js/justgage/justgage.js"></script>
	<style>
      #g1 {
        width:100px; height:80px;
        display: inline-block;
        margin: 1em;
      }
    </style>	
	
	
	
	
	<!--
<script src="js/dygraph-combined.js"></script>
  -->
	<script src="js/paho-mqtt-min.js"></script>
	<script src="js/mqtt.js"></script>
	
<script>
$( document ).on( "mobileinit", function() { 

console.log("mobileinit:1");
console.log("mobileinit:0");
});


var object1 = $( document ).on( "pagecreate", function() {



console.log("pagecreate");

/**
	//#--------------------------------------------
		//if (java && java.net)
		//ip = ''+java.net.InetAddress.getLocalHost().getHostAddress();
		//else ip = 'unknown';
	
	//#--------------------------------------------
		//MyHeader_wText("MAXIOT");
	//#--------------------------------------------
		$("#theme_Day").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();			    
			theme_Selector("a");
		});	
	//#--------------------------------------------	
		$("#theme_Night").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();	
			theme_Selector("b");   
		});			
	//#--------------------------------------------
		$("#server_connect").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();
			window.open ('index.php','_self',false); 
		});	
	//#--------------------------------------------
		$("#server_Disconnect").click(function (e) {
			//e.stopImmediatePropagation();
			//e.preventDefault();
		});	
	//#--------------------------------------------	

		
		
		
	//#--------------------------------------------	
		$("#b2").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();	
			theme_Selector("b");   
		});		

		$("#b3").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();	
			theme_Selector("a");   
		});		
		
			
	//#--------------------------------------------


	**/
});


function SYS_INIT() {
	$("#Password_Button").button('enable');
	$("#Password_Input").textinput('enable');
	$("#video_Button").button('enable');
	$.mobile.changePage("#page_2");
	Disconnect();
}
var client;
var Connect_Status = 0;
var SYS_STEP = 0;
function SYS_LOOP() {
    switch (SYS_STEP) {
    case 0:
		console.log("SYS_LOOP:0");
		Connect_Status = 0;
		
		client = new Paho.MQTT.Client("104.168.53.100", Number("3025"), "4455@JQ_Test");
		client.onConnectionLost = onConnectionLost;
		client.onMessageArrived = onMessageArrived;

        client.connect(
            {
                cleanSession : false, 
                onSuccess : onConnectSuccess, 
                onFailure : onFailedConnect, 
				//keepAliveInterval: 30, 
                //reconnect : true,         // Enable automatic reconnect
                //reconnectInterval: 10     // Reconnect attempt interval : 10 seconds
            }
        );		
		
		
		
		SYS_STEP = 1; setTimeout(SYS_LOOP, 1);
        break;
    case 1:
		console.log("SYS_LOOP:1");
		SYS_STEP = 2; setTimeout(SYS_LOOP, 1);		
        break;									
    case 2:
		console.log("SYS_LOOP:2");
		if(Connect_Status === 1) SYS_STEP = 10;//onConnectSuccess
		if(Connect_Status === 2) SYS_STEP = 20;//onFailedConnect
		setTimeout(SYS_LOOP, 1);
		break;		
    case 10:
		console.log("SYS_LOOP:10");
		$.mobile.changePage("#page_2");	
		break;
    case 20:
		console.log("SYS_LOOP:20");
		$.mobile.changePage("#page_3");		
		break;
    case 99:		
		break;
    default:
        break;
    }
}

//$(document).on("pagecreate","#pagetwo",function(event){








//#####################################################################
// 111
//
//
//#####################################################################
var Conf = [''];
$(document).on('pagebeforecreate',"#page_1", function(){
	console.log("pagebeforecreate page_1 start");
	
	
	var r = 0;
	r++;Conf[r] = "collapsible_start,collapsible"
	r++;Conf[r] = "text,ეს არის ტესტ ტექსტი";
	r++;Conf[r] = "button,OK,0,OK";
	r++;Conf[r] = "slider,0,150,10,5";
	r++;Conf[r] = "grid,2"
	r++;Conf[r] = "flip,on,1,off,0,4";
	r++;Conf[r] = "flip,on,1,off,0,4";
	r++;Conf[r] = "grid,2"
	r++;Conf[r] = "text_input,რაიმე ტექსტი,0";
	r++;Conf[r] = "password_input,რაიმე ტექსტი,0";		
	r++;Conf[r] = "select_start"
	r++;Conf[r] = "select,1,მერსედესი"
	r++;Conf[r] = "select,2,ტოიოტა"
	r++;Conf[r] = "select,3,ბენტლი"
	r++;Conf[r] = "select,3,ფერარი"
	r++;Conf[r] = "select,3,გოლფი"
	r++;Conf[r] = "select_stop,4"
	r++;Conf[r] = "collapsible_stop"
	
	r++;Conf[r] = "collapsible_start,collapsible + grid"	
		r++;Conf[r] = "grid,3"
			r++;Conf[r] = "button,1,0,OK";
			r++;Conf[r] = "button,2,0,OK";
			r++;Conf[r] = "button,3,0,OK";
		r++;Conf[r] = "grid,3"
			r++;Conf[r] = "button,4,0,OK";
			r++;Conf[r] = "button,5,0,OK";
			r++;Conf[r] = "button,6,0,OK";
		r++;Conf[r] = "grid,3"
			r++;Conf[r] = "button,7,0,OK";
			r++;Conf[r] = "button,8,0,OK";
			r++;Conf[r] = "button,9,0,OK";
		r++;Conf[r] = "grid,3"
			r++;Conf[r] = "button,*,0,OK";
			r++;Conf[r] = "button,0,0,OK";
			r++;Conf[r] = "button,#,0,OK";
		
		r++;Conf[r] = "grid,2"
			r++;Conf[r] = "button,Enter,0,OK";
			r++;Conf[r] = "select_start"
				r++;Conf[r] = "select,1,მერსედესი"
				r++;Conf[r] = "select,2,ტოიოტა"
				r++;Conf[r] = "select,3,ბენტლი"
				r++;Conf[r] = "select,3,ფერარი"
				r++;Conf[r] = "select,3,გოლფი"
			r++;Conf[r] = "select_stop,4"

	r++;Conf[r] = "collapsible_stop"
		
	
	r++;Conf[r] = "grid,2"
	r++;Conf[r] = "button,1,0,OK";
	r++;Conf[r] = "button,2,0,OK";
	

	r++;Conf[r] = "button,3,0,OK";
	r++;Conf[r] = "button,4,0,OK";
	r++;Conf[r] = "button,5,0,OK";
	r++;Conf[r] = "button,6,0,OK";
	

	console.log(Conf.length);
	
	
	
	var Conf_Len = Conf.length
	
	var isHTML =''
	var isJAVA =''
	
	var grid_start = 0;
	var grid_num   = 0;
	var grid_cou   = 0;
	var grid_add   = 0;
	var grid_ignor = 0;
	
	var collapsible_status = 0;
	
	var isDataRole = 'content_1'
	
	var i; 
	var select = ""; var select_id = ""
	var p=['','','','','','',''];
	for (i = 0; i < Conf_Len; i++) {
		var Conf_Spl = Conf[i].split(',');
		var Conf_Spl_Len = Conf_Spl.length;
		
		
		
		
		
		if(grid_ignor === 0){
			if(grid_start===1){		
				if(grid_cou === 1){isHTML += '<div class="ui-block-a">'; grid_add = 1;}
				if(grid_cou === 2){isHTML += '<div class="ui-block-b">'; grid_add = 1;}
				if(grid_cou === 3){isHTML += '<div class="ui-block-c">'; grid_add = 1;}
				if(grid_cou === 4){isHTML += '<div class="ui-block-d">'; grid_add = 1;}
				if(grid_cou === 5){isHTML += '<div class="ui-block-e">'; grid_add = 1;}
			}
		}
	   
		switch(Conf_Spl[0]) {
		
		
			case "grid":
			
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="2";	
				if(p[1]==="2"){isHTML += '<fieldset class="ui-grid-a">';grid_num=2; grid_start=1;}
				if(p[1]==="3"){isHTML += '<fieldset class="ui-grid-b">';grid_num=3; grid_start=1;}
				if(p[1]==="4"){isHTML += '<fieldset class="ui-grid-c">';grid_num=4; grid_start=1;}
				if(p[1]==="5"){isHTML += '<fieldset class="ui-grid-d">';grid_num=5; grid_start=1;}
				grid_cou   = 1;
				grid_add   = 0;
				grid_ignor = 0;				
				break;				

		
			case "collapsible_start":
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="collapsible";	//on
				isHTML += '<div data-role="collapsible" class="ui-nodisc-icon ui-alt-icon">';
				isHTML += '<h4>'+p[1]+'</h4>';
				collapsible_status = 1;
				break;				
			case "collapsible_stop":
				isHTML += '</div>';
				collapsible_status = 0;
				break;	


				
		
		
			case "text":
			
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="default";	
				isHTML += isGUI_Text (p[1]);				
				break;
			
			case "button":

				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="default";
				if(Conf_Spl_Len >= 3)p[2]=Conf_Spl[2]; else p[2]="0";	//OutPut	
				if(Conf_Spl_Len >= 4)p[3]=Conf_Spl[3]; else p[3]="1";	//Data
				
				var isID = "E"+i;
				
				isHTML += isGUI_Button(isID,p[1]);
				
				isGUI_Click("page_1","content_1",isID,p[2],p[3]);
				break;
			
			case "slider":
			
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="0";	//min
				if(Conf_Spl_Len >= 3)p[2]=Conf_Spl[2]; else p[2]="100";	//max		
				if(Conf_Spl_Len >= 4)p[3]=Conf_Spl[3]; else p[3]="1";	//step
				if(Conf_Spl_Len >= 4)p[3]=Conf_Spl[3]; else p[4]="0";	//OutPut
				
				var isID = "E"+i;
				isHTML += isGUI_Slider(isID,p[1],p[2],p[3]);
				
				isGUI_Slider_Stop("page_1","content_1",isID,p[4]);
				break;
			
			
			case "flip":

				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1]; else p[1]="on";	//on
				if(Conf_Spl_Len >= 3)p[2]=Conf_Spl[2]; else p[2]="1";	//on  value	
				if(Conf_Spl_Len >= 4)p[3]=Conf_Spl[3]; else p[3]="off";	//off
				if(Conf_Spl_Len >= 5)p[4]=Conf_Spl[4]; else p[4]="0";	//off value	
				if(Conf_Spl_Len >= 6)p[5]=Conf_Spl[5]; else p[5]="0";	//OutPut
				
				var isID = "E"+i;
				isHTML += isGUI_flip(isID,p[1],p[2],p[3],p[4]);
				
				isGUI_flip_Change("page_1","content_1",isID,p[5]);			
				break;
			
			case "text_input":
				var isID = "In"+i;			
				isHTML += isGUI_Input_Text(isID,"ok ok ok rrr");
				break;
						
			case "password_input":		
				var isID = "In"+i;			
				isHTML += isGUI_Input_Password(isID,"123456");
				break;			
			
			
			case "select_start":
				select_id = "E"+i;
				isHTML += '<select name="'+select_id+'" id="'+select_id+'" data-native-menu="false">';
				grid_ignor = 1;
				break;			
			case "select":
				p[1]="sel_"+i;
				p[2]="select "+i;
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1];
				if(Conf_Spl_Len >= 3)p[2]=Conf_Spl[2];
				isHTML += '<option value="'+p[1]+'">'+p[2]+'</option>';
				break;			
			case "select_stop":
				p[1]="0";
				if(Conf_Spl_Len >= 2)p[1]=Conf_Spl[1];
				isHTML += '</select>';
				isGUI_Select_Change("page_1","content_1",select_id,p[1]);
				grid_ignor = 0;
				break;				

			default:
				break;
		}
		
		
		if(grid_ignor === 0){
			if( grid_add === 1){	
				grid_cou ++;
				grid_add = 0;
				isHTML += '</div>';
				if(grid_cou > grid_num){
					grid_start = 0;
					isHTML += '</fieldset>';
				}
			}
		}
		
		

	}
	
	$('[data-role="content_1"]').append(isHTML);
//#--------------------------------------------	




rrr = '<fieldset class="ui-grid-b">';
    rrr += '<div class="ui-block-a"><input type="button" value="Hmm"></div>';
    rrr += '<div class="ui-block-b"><input type="reset" value="No"></div>';
    rrr += '<div class="ui-block-c"><input type="submit" value="Yes"></div>';
	rrr += '<div class="ui-block-d"><input type="submit" value="Yes"></div>';
rrr += '</fieldset>';
$('[data-role="content_1"]').append(rrr);


	
	var rrr = '<div data-role="controlgroup" data-type="horizontal">\
        <input type="radio" name="XX_" id="xx_1" value="111" ><label for="xx_1">One</label>\
        <input type="radio" name="XX_" id="xx_2" value="111" ><label for="xx_2">One</label>\
        <input type="radio" name="XX_" id="xx_3" value="111" ><label for="xx_3">One</label>\
    </div>'	
	$('[data-role="content_1"]').append(rrr);



$('[data-role="content_1"]').append(rrr);



	rrr = '<fieldset data-role="controlgroup">\
		<input type="radio" name="YY_" id="yy_1" value="on"><label for="yy_1">One</label>\
		<input type="radio" name="YY_" id="yy_2" value="off"><label for="yy_2">Two</label>\
		<input type="radio" name="YY_" id="yy_3" value="other"><label for="yy_3">Three</label>\
		</fieldset>'
	$('[data-role="content_1"]').append(rrr);
		
	
	rrr = '<div data-role="listview" data-inset="true" name="is_listview" id="is_listview" >\
		<li><a id="yy_0" >Audi</a></li>\
		<li><a id="yy_1" >BMW</a></li>\
		<li><a id="yy_2" >Cadillac</a></li>\
		<li><a id="yy_3" >Ferrari</a></li>\
	</div>'
	$('[data-role="content_1"]').append(rrr);
	
	
	rrr = '';
	rrr += '<a href="#popupLogin" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-check ui-btn-icon-left ui-btn-a" data-transition="pop">Sign in</a>';
	rrr += '<div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all">';
	    rrr += '<form>';
	        rrr += '<div style="padding:10px 20px;">';
	            rrr += '<h3>Please sign in</h3>';
	            rrr += '<label for="un" class="ui-hidden-accessible">Username:</label>';
	            rrr += '<input type="text" name="user" id="un" value="" placeholder="username" data-theme="a">';
	            rrr += '<label for="pw" class="ui-hidden-accessible">Password:</label>';
	            rrr += '<input type="password" name="pass" id="pw" value="" placeholder="password" data-theme="a';
	            rrr += '<button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">Sign in</button>';
	        rrr += '</div>';
	    rrr += '</form>';
	rrr += '</div>';
$('[data-role="content_1"]').append(rrr);





















});



$(document).on("pageinit","#page_1",function(){

	$('#is_listview').delegate('a', 'click', function () {

		 console.log("Value = "+this.id);
		 console.log("Value = "+this.value);
    });

	
});	




//#####################################################################
// 222
//
//
//#####################################################################

$(document).on('pagebeforecreate',"#page_2", function(){    
	console.log("pagebeforecreate:1:page_2");
	//#--------------------------------------------
		$("#theme_Day").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();
			console.log("#theme_Day_click");			
			theme_Selector("a");
		});	
	//#--------------------------------------------	
		$("#theme_Night").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();	
			console.log("#theme_Night_click");
			theme_Selector("b");   
		});			
	//#--------------------------------------------
		$("#start_page3").click(function (e) {
			e.stopImmediatePropagation();
			e.preventDefault();	
			console.log("#start_page3_click");
			SYS_INIT(); 
		});			
	//#--------------------------------------------	
	console.log("pagebeforecreate:0:page_2");
});



//<a href="tryit.asp-filename=tryjqmob_pages.html#page_4">Go to Page 4</a>
</script>





<script>
</script>



	
</head>
<body>




<!-- ####################################################################################### -->

<div data-role="page" id="page_1">
	<div data-role="header">
		<h3><span id="MyHeader_Text">შუშაბანდის განათების მართვა</span></h3>  
		<div data-role="navbar">
			<ul>
				<li><a href="#" id="start_page2">საწყისი</a></li>
				<li><a href="#" id="server_Disconnect">.</a></li>
				<li><a href="#" id="theme_Day" >.</a></li>
				<li><a href="#" id="theme_Night" >.</a></li>
			</ul>
		</div>
	</div><!-- /header -->
	

	
	<div data-role="content_1" class="ui-content" role="main"></div>


	<div id="g1"></div>
	
</div><!-- /page -->

<!-- ####################################################################################### -->

<div data-role="page" id="page_3">
	<div data-role="header">
		<h3><span id="MyHeader_Text">შეცდომა</span></h3>  
		<div data-role="navbar">
			<ul>
				<li><a href="#" id="start_page3">საწყისი</a></li>
				<li><a href="#" id="server_Disconnect">.</a></li>
				<li><a href="#" id="theme_Day" >.</a></li>
				<li><a href="#" id="theme_Night" >.</a></li>
			</ul>
		</div>
	</div><!-- /header -->
	<div data-role="content_3" class="ui-content" role="main">			

			<a href="tryit.asp-filename=tryjqmob_pages.html#page_1">Go to Page 1</a>
	</div>
</div><!-- /page -->


<!-- ####################################################################################### -->
</body>
</html>
